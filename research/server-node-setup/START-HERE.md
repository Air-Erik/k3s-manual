# üöÄ –°–¢–ê–†–¢: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s Server Node

> **–û—Ç:** Team Lead
> **–î–∞—Ç–∞:** 2025-10-24
> **–≠—Ç–∞–ø:** 1.1 - Server Node Setup

---

## ‚úÖ –ü–û–ó–î–†–ê–í–õ–Ø–Æ –° –ó–ê–í–ï–†–®–ï–ù–ò–ï–ú –≠–¢–ê–ü–ê 0!

**VM Template —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!** üéâ

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–∞–º–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–º—É ‚Äî **—É—Å—Ç–∞–Ω–æ–≤–∫–µ k3s –∫–ª–∞—Å—Ç–µ—Ä–∞**!

---

## üéØ –ó–ê–î–ê–ß–ê –≠–¢–ê–ü–ê 1.1

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å k3s Server Node** ‚Äî –ø–µ—Ä–≤—É—é –Ω–æ–¥—É –∫–ª–∞—Å—Ç–µ—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç:
- Kubernetes API Server
- etcd (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è)
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Traefik, ServiceLB, CoreDNS, Flannel)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~28 –º–∏–Ω—É—Ç (15 –º–∏–Ω AI + 13 –º–∏–Ω –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ)

---

## üì¶ –ß–¢–û –ü–û–õ–£–ß–ò–¢–ï –û–¢ AI

AI —Å–æ–∑–¥–∞—Å—Ç **8 –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:**

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (6 —Ñ–∞–π–ª–æ–≤):**
1. `research/server-node-setup/01-installation-process.md`
2. `research/server-node-setup/02-clone-vm-for-server.md`
3. `research/server-node-setup/03-get-credentials.md`
4. `research/server-node-setup/04-validate-installation.md`
5. `research/server-node-setup/05-troubleshooting.md`
6. `research/server-node-setup/06-prepare-for-agents.md`

**–°–∫—Ä–∏–ø—Ç—ã (2 —Ñ–∞–π–ª–∞):**
7. `scripts/install-k3s-server.sh` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s
8. `scripts/validate-k3s-server.sh` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è

---

## üöÄ –ö–ê–ö –ù–ê–ß–ê–¢–¨

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞–±–æ—Ç–∞ –≤ Cursor (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª—ã:**
   - `README.md`
   - `nsx-configs/segments.md`
   - `research/server-node-setup/AI-AGENT-TASK.md`

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç:**
```
–ü—Ä–∏–≤–µ—Ç! –¢—ã AI-–∞–≥–µ–Ω—Ç, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º k3s –Ω–∞ vSphere.

–Ø –ø—Ä–∏–∫—Ä–µ–ø–∏–ª:
1. README.md ‚Äî –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
2. nsx-configs/segments.md ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∏
3. AI-AGENT-TASK.md ‚Äî —Ç–≤–æ—è –∑–∞–¥–∞—á–∞

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å k3s Server Node.

–ö–æ–Ω—Ç–µ–∫—Å—Ç:
- –≠—Ç–∞–ø 0 (VM Template) –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ ‚úÖ
- VM Template –≥–æ—Ç–æ–≤ –∫ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é
- Cloud-init –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã
- –°–µ–π—á–∞—Å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–µ—Ä–≤—É—é k3s –Ω–æ–¥—É (Server)

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- Server IP: 10.246.10.50
- DNS: 172.17.10.3, 8.8.8.8
- Gateway: 10.246.10.1
- Interface: ens192

k3s ‚Äî —ç—Ç–æ –ü–†–û–°–¢–ê–Ø —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π!
curl -sfL https://get.k3s.io | sh -s - server [–ø–∞—Ä–∞–º–µ—Ç—Ä—ã]

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞:
1. –ü—Ä–æ—á–∏—Ç–∞–π AI-AGENT-TASK.md –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –°–æ–∑–¥–∞–≤–∞–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–≠—Ç–∞–ø—ã 1-7)
3. –ü–∏—à–∏ –≥–æ—Ç–æ–≤—ã–µ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∫—Ä–∏–ø—Ç—ã
4. –§–æ–∫—É—Å –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–µ k3s!

–ù–∞—á–Ω—ë–º —Å –≠—Ç–∞–ø–∞ 1: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
–ì–æ—Ç–æ–≤?
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: ChatGPT/Claude

–¢–µ –∂–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —á–∞—Ç.

---

## üìã –ü–†–û–¶–ï–°–° –†–ê–ë–û–¢–´

### 1. AI —Å–æ–∑–¥–∞—ë—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (~15 –º–∏–Ω)
   - –î–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
   - –°–∫—Ä–∏–ø—Ç—ã
   - Troubleshooting guide

### 2. –í—ã –ø—Ä–∏–º–µ–Ω—è–µ—Ç–µ –Ω–∞ vSphere (~13 –º–∏–Ω)
   - –ö–ª–æ–Ω–∏—Ä—É–µ—Ç–µ VM –∏–∑ Template (3 –º–∏–Ω)
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç–µ cloud-init –¥–ª—è 10.246.10.50
   - SSH –∫ VM
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ `install-k3s-server.sh` (5 –º–∏–Ω)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è (5 –º–∏–Ω)

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç
   - ‚úÖ k3s Server —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ kubectl –¥–æ—Å—Ç—É–ø–µ–Ω
   - ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ pods Running
   - ‚úÖ kubeconfig –∏ node-token —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

–≠—Ç–∞–ø 1.1 –∑–∞–≤–µ—Ä—à—ë–Ω –∫–æ–≥–¥–∞:

- [ ] VM –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è Server (10.246.10.50)
- [ ] k3s —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `systemctl status k3s` = active
- [ ] kubectl —Ä–∞–±–æ—Ç–∞–µ—Ç: `kubectl get nodes` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 1 Ready node
- [ ] –í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ pods Running
- [ ] kubeconfig –ø–æ–ª—É—á–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] node-token —Å–æ—Ö—Ä–∞–Ω—ë–Ω –¥–ª—è Agent –Ω–æ–¥

---

## üìä –ß–¢–û –î–ê–õ–¨–®–ï

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Server:
- **–≠—Ç–∞–ø 1.2:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Agent Nodes (~20 –º–∏–Ω)
- **–≠—Ç–∞–ø 2:** vSphere CSI Driver (~25 –º–∏–Ω)
- **–≠—Ç–∞–ø 3:** Validation (~15 –º–∏–Ω)

**–î–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞:** ~1 —á–∞—Å!

---

## üìû –û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–æ–±—â–∏—Ç–µ Team Lead:

**‚úÖ –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ:**
```
Team Lead, –≠—Ç–∞–ø 1.1 –∑–∞–≤–µ—Ä—à—ë–Ω!
- k3s Server —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- kubectl —Ä–∞–±–æ—Ç–∞–µ—Ç
- –°–∏—Å—Ç–µ–º–Ω—ã–µ pods Running
- kubeconfig –∏ node-token —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- –ì–æ—Ç–æ–≤ –∫ –≠—Ç–∞–ø—É 1.2 (Agent nodes)
```

**‚ö†Ô∏è –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:**
```
Team Lead, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ –≠—Ç–∞–ø–µ 1.1:
- [–û–ø–∏—Å–∞–Ω–∏–µ]
- [–õ–æ–≥–∏]
```

---

## üí° –ü–û–õ–ï–ó–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### k3s ‚Äî —ç—Ç–æ –ü–†–û–°–¢–û!

**vs "–ø–æ–ª–Ω—ã–π" Kubernetes:**
- kubeadm: 20+ –∫–æ–º–∞–Ω–¥, 2-4 —á–∞—Å–∞
- k3s: 1 –∫–æ–º–∞–Ω–¥–∞, 5-10 –º–∏–Ω—É—Ç

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s:**
```bash
curl -sfL https://get.k3s.io | sh -s - server \
  --node-ip 10.246.10.50 \
  --flannel-iface ens192
```

**–í—Å—ë! Kubernetes –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**

---

**–ù–∞—á–∏–Ω–∞–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å AI-–∞–≥–µ–Ω—Ç–æ–º! –£–¥–∞—á–∏! üöÄ**
