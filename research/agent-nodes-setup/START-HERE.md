# üöÄ –°–¢–ê–†–¢: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s Agent Nodes

> **–û—Ç:** Team Lead
> **–î–∞—Ç–∞:** 2025-10-24
> **–≠—Ç–∞–ø:** 1.2 - Agent Nodes Setup

---

## ‚úÖ –ü–û–ó–î–†–ê–í–õ–Ø–Æ –° –ó–ê–í–ï–†–®–ï–ù–ò–ï–ú –≠–¢–ê–ü–ê 1.1!

**k3s Server Node —Ä–∞–±–æ—Ç–∞–µ—Ç!** üéâ

–¢–µ–ø–µ—Ä—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º **2 Agent –Ω–æ–¥—ã** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ workloads!

---

## üéØ –ó–ê–î–ê–ß–ê –≠–¢–ê–ü–ê 1.2

**–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å 2 k3s Agent Nodes** –∫ –∫–ª–∞—Å—Ç–µ—Ä—É:
- **Agent-01:** 10.246.10.51 (k3s-agent-01)
- **Agent-02:** 10.246.10.52 (k3s-agent-02)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–ª–∞—Å—Ç–µ—Ä –∏–∑ 3 –Ω–æ–¥ (1 Server + 2 Agent), –≤—Å–µ Ready.

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~35 –º–∏–Ω—É—Ç (12 –º–∏–Ω AI + 23 –º–∏–Ω –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ)

---

## üì¶ –ß–¢–û –ü–û–õ–£–ß–ò–¢–ï –û–¢ AI

AI —Å–æ–∑–¥–∞—Å—Ç **8 –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤:**

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (6 —Ñ–∞–π–ª–æ–≤):**
1. `research/agent-nodes-setup/01-agent-overview.md`
2. `research/agent-nodes-setup/02-get-node-token.md`
3. `research/agent-nodes-setup/03-clone-vms-for-agents.md`
4. `research/agent-nodes-setup/04-installation-steps.md`
5. `research/agent-nodes-setup/05-validate-cluster.md`
6. `research/agent-nodes-setup/06-troubleshooting.md`

**–°–∫—Ä–∏–ø—Ç—ã (2 —Ñ–∞–π–ª–∞):**
7. `scripts/install-k3s-agent.sh` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Agent
8. `scripts/validate-k3s-cluster.sh` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞

---

## üöÄ –ö–ê–ö –ù–ê–ß–ê–¢–¨

### –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª—ã –∫ AI:
- `README.md`
- `nsx-configs/segments.md`
- `research/agent-nodes-setup/AI-AGENT-TASK.md`

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–º–ø—Ç:
```
–ü—Ä–∏–≤–µ—Ç! –¢—ã AI-–∞–≥–µ–Ω—Ç, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º k3s –Ω–∞ vSphere.

–Ø –ø—Ä–∏–∫—Ä–µ–ø–∏–ª:
1. README.md ‚Äî –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
2. nsx-configs/segments.md ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–µ—Ç–∏
3. AI-AGENT-TASK.md ‚Äî —Ç–≤–æ—è –∑–∞–¥–∞—á–∞

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å k3s Agent Nodes –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –∫ –∫–ª–∞—Å—Ç–µ—Ä—É.

–ö–æ–Ω—Ç–µ–∫—Å—Ç:
- –≠—Ç–∞–ø 0 (VM Template) –∑–∞–≤–µ—Ä—à—ë–Ω ‚úÖ
- –≠—Ç–∞–ø 1.1 (k3s Server) –∑–∞–≤–µ—Ä—à—ë–Ω ‚úÖ
- Server –Ω–æ–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 10.246.10.50
- kubectl —Ä–∞–±–æ—Ç–∞–µ—Ç
- node-token –ø–æ–ª—É—á–µ–Ω
- –°–µ–π—á–∞—Å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º 2 Agent –Ω–æ–¥—ã

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- Server IP: 10.246.10.50 (—Ä–∞–±–æ—Ç–∞–µ—Ç)
- Agent-01 IP: 10.246.10.51
- Agent-02 IP: 10.246.10.52
- DNS: 172.17.10.3, 8.8.8.8
- Gateway: 10.246.10.1

k3s Agent = –ü–†–û–°–¢–û–ï –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π!
curl -sfL https://get.k3s.io | K3S_URL=... K3S_TOKEN=... sh -s - agent

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞:
1. –ü—Ä–æ—á–∏—Ç–∞–π AI-AGENT-TASK.md –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. –°–æ–∑–¥–∞–≤–∞–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–≠—Ç–∞–ø—ã 1-8)
3. –ü–∏—à–∏ –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
4. –§–æ–∫—É—Å –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–µ k3s!

–ù–∞—á–Ω—ë–º —Å –≠—Ç–∞–ø–∞ 1: –û–±–∑–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è Agent.
–ì–æ—Ç–æ–≤?
```

---

## üìã –ü–†–û–¶–ï–°–° –†–ê–ë–û–¢–´

### 1. AI —Å–æ–∑–¥–∞—ë—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (~12 –º–∏–Ω)
   - –î–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é Agent
   - –°–∫—Ä–∏–ø—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

### 2. –í—ã –ø—Ä–∏–º–µ–Ω—è–µ—Ç–µ (~23 –º–∏–Ω)
   - –ü–æ–ª—É—á–∞–µ—Ç–µ node-token —Å Server (2 –º–∏–Ω)
   - –ö–ª–æ–Ω–∏—Ä—É–µ—Ç–µ 2 VM –∏–∑ Template (6 –º–∏–Ω)
   - –ü—Ä–∏–º–µ–Ω—è–µ—Ç–µ cloud-init –¥–ª—è .51 –∏ .52
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ k3s agent –Ω–∞ –æ–±–µ–∏—Ö (10 –º–∏–Ω)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞ (5 –º–∏–Ω)

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç
   - ‚úÖ 3 –Ω–æ–¥—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ
   - ‚úÖ –í—Å–µ –Ω–æ–¥—ã Ready
   - ‚úÖ Pods —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –≤—Å–µ–º –Ω–æ–¥–∞–º
   - ‚úÖ –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

–≠—Ç–∞–ø 1.2 –∑–∞–≤–µ—Ä—à—ë–Ω –∫–æ–≥–¥–∞:

- [ ] 2 VM –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Agent (10.246.10.51-52)
- [ ] k3s agent —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –æ–±–µ–∏—Ö –Ω–æ–¥–∞—Ö
- [ ] `systemctl status k3s-agent` = active –Ω–∞ Agent
- [ ] `kubectl get nodes` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 Ready –Ω–æ–¥—ã
- [ ] –í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ pods Running
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π deployment —É—Å–ø–µ—à–µ–Ω
- [ ] Pods –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–∞ Agent –Ω–æ–¥–∞—Ö

---

## üìä –ß–¢–û –î–ê–õ–¨–®–ï

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Agent –Ω–æ–¥:
- **–≠—Ç–∞–ø 2:** vSphere CSI Driver (~25 –º–∏–Ω)
- **–≠—Ç–∞–ø 3:** Validation & Testing (~15 –º–∏–Ω)

**–î–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞:** ~40 –º–∏–Ω—É—Ç!

---

## üìû –û–ë–†–ê–¢–ù–ê–Ø –°–í–Ø–ó–¨

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–æ–±—â–∏—Ç–µ Team Lead:

**‚úÖ –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ:**
```
Team Lead, –≠—Ç–∞–ø 1.2 –∑–∞–≤–µ—Ä—à—ë–Ω!
- 2 Agent –Ω–æ–¥—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω—ã (10.246.10.51-52)
- kubectl get nodes –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 Ready –Ω–æ–¥—ã
- –í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ pods Running
- –¢–µ—Å—Ç–æ–≤—ã–π deployment —É—Å–ø–µ—à–µ–Ω
- –ö–ª–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- –ì–æ—Ç–æ–≤ –∫ –≠—Ç–∞–ø—É 2 (vSphere CSI)
```

**‚ö†Ô∏è –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:**
```
Team Lead, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ –≠—Ç–∞–ø–µ 1.2:
- [–û–ø–∏—Å–∞–Ω–∏–µ]
- [–õ–æ–≥–∏]
```

---

## üí° –ü–û–õ–ï–ó–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### k3s Agent ‚Äî —ç—Ç–æ –ü–†–û–°–¢–û!

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Agent:**
```bash
# –ü–æ–ª—É—á–∏—Ç—å token —Å Server
ssh k8s-admin@10.246.10.50
sudo cat /var/lib/rancher/k3s/server/node-token

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Agent
ssh k8s-admin@10.246.10.51
curl -sfL https://get.k3s.io | \
  K3S_URL=https://10.246.10.50:6443 \
  K3S_TOKEN=xxx sh -s - agent \
  --node-ip 10.246.10.51 \
  --node-name k3s-agent-01
```

**–í—Å—ë! –ó–∞ 2-3 –º–∏–Ω—É—Ç—ã –Ω–æ–¥–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∞!**

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```bash
# –° Server –Ω–æ–¥—ã
kubectl get nodes
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 3 –Ω–æ–¥—ã –≤ Ready
```

---

**–ù–∞—á–∏–Ω–∞–π—Ç–µ —Ä–∞–±–æ—Ç—É —Å AI-–∞–≥–µ–Ω—Ç–æ–º! –£–¥–∞—á–∏! üöÄ**

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —ç—Ç–∞–ø–∞ —É –≤–∞—Å –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π 3-node –∫–ª–∞—Å—Ç–µ—Ä!**
