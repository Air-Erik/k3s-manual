# k3s Project Plan

> **–¶–µ–ª—å:** –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å k3s –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ VMware vSphere —Å NSX-T
> **–°—Ç–∞—Ç—É—Å:** üöÄ Ready to Start
> **–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-10-22

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### –¶–µ–ª—å
–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π k3s –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ VMware vSphere —Å NSX-T, –∏—Å–ø–æ–ª—å–∑—É—è —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å "–ø–æ–ª–Ω—ã–º" Kubernetes.

### –ü–æ—á–µ–º—É k3s?
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π vs –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å kubeadm
- **–°–∫–æ—Ä–æ—Å—Ç—å:** 1.5 —á–∞—Å–∞ vs 4+ —á–∞—Å–æ–≤ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ k8s
- **–õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ—Å—Ç—å:** –ú–µ–Ω—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –æ–¥–∏–Ω –±–∏–Ω–∞—Ä–Ω–∏–∫ ~50 –ú–ë
- **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** Traefik, ServiceLB, Storage –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- **Production-ready:** CNCF certified, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production

### Scope
**Dev-–∫–ª–∞—Å—Ç–µ—Ä (—Ç–µ–∫—É—â–∏–π):**
- 1 Server –Ω–æ–¥–∞ (API + etcd + workloads)
- 2 Agent –Ω–æ–¥—ã (workers)
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã k3s
- vSphere CSI –¥–ª—è persistent storage

**Production (–±—É–¥—É—â–µ–µ):**
- 3 Server –Ω–æ–¥—ã (HA)
- 3+ Agent –Ω–æ–¥
- –í–æ–∑–º–æ–∂–Ω–∞—è –∑–∞–º–µ–Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (Cilium, MetalLB)

---

## –≠—Ç–∞–ø—ã –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –≠—Ç–∞–ø -1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (COMPLETED)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Team Lead
**–°—Ä–æ–∫:** 2025-10-22
**–°—Ç–∞—Ç—É—Å:** ‚úÖ COMPLETED

**–ó–∞–¥–∞—á–∏:**
- [x] –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- [x] –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ NSX-T –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ k8s –ø—Ä–æ–µ–∫—Ç–∞
- [x] –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤ (TEAM-LEAD-GUIDE, AI-AGENT-WORKFLOW)
- [x] –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ PROJECT-PLAN (—ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç)
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (K3S-ARCHITECTURE)

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
- [x] `k3s/README.md` ‚úÖ
- [x] `k3s/TEAM-LEAD-GUIDE.md` ‚úÖ
- [x] `k3s/AI-AGENT-WORKFLOW.md` ‚úÖ
- [x] `k3s/PROJECT-PLAN.md` ‚úÖ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- [x] `k3s/K3S-ARCHITECTURE.md` ‚úÖ
- [x] `k3s/nsx-configs/segments.md` ‚úÖ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω)
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ (docs/, manifests/, scripts/, research/) ‚úÖ

---

### ‚è≥ –≠—Ç–∞–ø 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** AI-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å + –û–ø–µ—Ä–∞—Ç–æ—Ä
**–°—Ä–æ–∫:** TBD
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** –ù–µ—Ç (NSX-T —É–∂–µ –≥–æ—Ç–æ–≤)
**–°—Ç–∞—Ç—É—Å:** ‚è≥ TODO

#### –ó–∞–¥–∞—á–∏:

**0.1. VM Template Preparation**
- **–î–æ–∫—É–º–µ–Ω—Ç:** `docs/01-vm-template-prep.md`
- **AI –∑–∞–¥–∞–Ω–∏–µ:** `research/vm-template-prep/AI-AGENT-TASK.md`
- **–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å minimal VM Template –¥–ª—è k3s (–ë–ï–ó K8s –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤!)
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
  - [ ] Minimal Ubuntu 24.04 VM —Å–æ–∑–¥–∞–Ω–∞ –≤ vSphere
  - [ ] Cloud-init –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è k3s –Ω–æ–¥
  - [ ] –°–∫—Ä–∏–ø—Ç `scripts/prepare-minimal-vm.sh`
  - [ ] VM Template —Å–æ–∑–¥–∞–Ω –≤ vSphere
  - [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ

**–û—Ç–ª–∏—á–∏–µ –æ—Ç k8s:**
- ‚ùå –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º kubeadm, kubelet, kubectl
- ‚ùå –ù–ï –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º containerd –∑–∞—Ä–∞–Ω–µ–µ
- ‚úÖ –¢–æ–ª—å–∫–æ minimal Ubuntu + –±–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- ‚úÖ k3s —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–∞–º —Å containerd

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ 0:**
- [x] NSX-T —Å–µ–≥–º–µ–Ω—Ç –≥–æ—Ç–æ–≤ (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º) ‚úÖ
- [ ] VM Template –≥–æ—Ç–æ–≤, –º–æ–∂–Ω–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
- [ ] Cloud-init —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** ~30 –º–∏–Ω—É—Ç

---

### ‚è≥ –≠—Ç–∞–ø 1: k3s Cluster Bootstrap

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** AI-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å + –û–ø–µ—Ä–∞—Ç–æ—Ä
**–°—Ä–æ–∫:** TBD
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚úÖ –≠—Ç–∞–ø 0 –∑–∞–≤–µ—Ä—à—ë–Ω
**–°—Ç–∞—Ç—É—Å:** ‚è≥ TODO

#### –ó–∞–¥–∞—á–∏:

**1.1. Server Node Setup**
- **–î–æ–∫—É–º–µ–Ω—Ç:** `docs/02-server-node-setup.md`
- **AI –∑–∞–¥–∞–Ω–∏–µ:** `research/server-node-setup/AI-AGENT-TASK.md`
- **–¶–µ–ª—å:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å k3s server –Ω–æ–¥—É
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
  - [ ] VM –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è Server (10.246.10.50)
  - [ ] –°–∫—Ä–∏–ø—Ç `scripts/install-k3s-server.sh` —Å–æ–∑–¥–∞–Ω
  - [ ] k3s —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ Server –Ω–æ–¥–µ
  - [ ] kubeconfig –ø–æ–ª—É—á–µ–Ω (`/etc/rancher/k3s/k3s.yaml`)
  - [ ] node-token —Å–æ—Ö—Ä–∞–Ω—ë–Ω (`/var/lib/rancher/k3s/server/node-token`)
  - [ ] API Server –¥–æ—Å—Ç—É–ø–µ–Ω (curl https://10.246.10.50:6443/version)

**–ö–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–ø—Ä–∏–º–µ—Ä):**
```bash
curl -sfL https://get.k3s.io | sh -s - server \
  --node-ip 10.246.10.50 \
  --flannel-iface ens192
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- k3s systemd service –∑–∞–ø—É—â–µ–Ω
- kubectl get nodes –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 1 node (Server)
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç (traefik, coredns, etc.)

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** ~15 –º–∏–Ω—É—Ç

**1.2. Agent Nodes Setup**
- **–î–æ–∫—É–º–µ–Ω—Ç:** `docs/03-agent-nodes-setup.md`
- **AI –∑–∞–¥–∞–Ω–∏–µ:** `research/agent-nodes-setup/AI-AGENT-TASK.md`
- **–¶–µ–ª—å:** –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å Agent –Ω–æ–¥—ã –∫ –∫–ª–∞—Å—Ç–µ—Ä—É
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
  - [ ] 2 VM –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Agent (10.246.10.51-52)
  - [ ] –°–∫—Ä–∏–ø—Ç `scripts/install-k3s-agent.sh` —Å–æ–∑–¥–∞–Ω
  - [ ] Agent –Ω–æ–¥—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω—ã –∫ –∫–ª–∞—Å—Ç–µ—Ä—É
  - [ ] kubectl get nodes –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 –Ω–æ–¥—ã (1 Server + 2 Agent)
  - [ ] –í—Å–µ –Ω–æ–¥—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Ready

**–ö–æ–º–∞–Ω–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Agent (–ø—Ä–∏–º–µ—Ä):**
```bash
curl -sfL https://get.k3s.io | K3S_URL=https://10.246.10.50:6443 \
  K3S_TOKEN=[node-token] sh -s - agent \
  --node-ip [agent-ip]
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- –í—Å–µ –Ω–æ–¥—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Ready
- Pod –º–æ–∂–Ω–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª—é–±–æ–π –Ω–æ–¥–µ
- –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** ~20 –º–∏–Ω—É—Ç (10 –º–∏–Ω √ó 2 agent)

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ 1:**
- [ ] 1 Server –Ω–æ–¥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] 2 Agent –Ω–æ–¥—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω—ã
- [ ] kubectl get nodes –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 Ready –Ω–æ–¥—ã
- [ ] –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç (Traefik, CoreDNS)
- [ ] –ú–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π pod

---

### ‚è≥ –≠—Ç–∞–ø 2: Storage Setup (vSphere CSI)

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** AI-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å + –û–ø–µ—Ä–∞—Ç–æ—Ä
**–°—Ä–æ–∫:** TBD
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚úÖ –≠—Ç–∞–ø 1 –∑–∞–≤–µ—Ä—à—ë–Ω
**–°—Ç–∞—Ç—É—Å:** ‚è≥ TODO

#### –ó–∞–¥–∞—á–∏:

**2.1. vSphere CSI Driver Installation**
- **–î–æ–∫—É–º–µ–Ω—Ç:** `docs/04-storage-setup.md`
- **AI –∑–∞–¥–∞–Ω–∏–µ:** `research/vsphere-csi-setup/AI-AGENT-TASK.md`
- **–¶–µ–ª—å:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å persistent storage —á–µ—Ä–µ–∑ vSphere
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
  - [ ] vSphere CSI –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –≤ `manifests/vsphere-csi/`
  - [ ] vSphere credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (Secret)
  - [ ] CSI Driver —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
  - [ ] StorageClass —Å–æ–∑–¥–∞–Ω
  - [ ] –¢–µ—Å—Ç–æ–≤—ã–π PVC —Å–æ–∑–¥–∞–Ω –∏ bound
  - [ ] –¢–µ—Å—Ç–æ–≤—ã–π Pod —Å PVC —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í–∞–∂–Ω–æ:**
- k3s –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ vSphere CSI —á—Ç–æ –∏ –ø–æ–ª–Ω—ã–π k8s
- –¢—Ä–µ–±—É–µ—Ç—Å—è vCenter credentials
- Datastore –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- CSI Controller –∏ Node pods —Ä–∞–±–æ—Ç–∞—é—Ç
- StorageClass —Å–æ–∑–¥–∞–Ω (—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ vSphere)
- PVC —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è
- Pod –º–æ–∂–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å volume

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** ~25 –º–∏–Ω—É—Ç

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ 2:**
- [ ] vSphere CSI Driver —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] StorageClass —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] PVC/PV —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] Persistent storage –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

### ‚è≥ –≠—Ç–∞–ø 3: Validation & Testing

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** AI-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å + –û–ø–µ—Ä–∞—Ç–æ—Ä
**–°—Ä–æ–∫:** TBD
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚úÖ –≠—Ç–∞–ø—ã 1-2 –∑–∞–≤–µ—Ä—à–µ–Ω—ã
**–°—Ç–∞—Ç—É—Å:** ‚è≥ TODO

#### –ó–∞–¥–∞—á–∏:

**3.1. Cluster Validation**
- **–î–æ–∫—É–º–µ–Ω—Ç:** `docs/05-validation.md`
- **AI –∑–∞–¥–∞–Ω–∏–µ:** `research/validation/AI-AGENT-TASK.md`
- **–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–ª–∞—Å—Ç–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω
- **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
  - [ ] –°–∫—Ä–∏–ø—Ç `scripts/validate-cluster.sh` —Å–æ–∑–¥–∞–Ω
  - [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ
  - [ ] Traefik Ingress –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
  - [ ] ServiceLB –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω (LoadBalancer service)
  - [ ] Local Storage –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
  - [ ] vSphere CSI –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
  - [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è troubleshooting —Å–æ–∑–¥–∞–Ω–∞

**–¢–µ—Å—Ç—ã:**
1. **–ë–∞–∑–æ–≤—ã–π deployment:**
   ```bash
   kubectl create deployment nginx --image=nginx --replicas=3
   kubectl expose deployment nginx --port=80 --type=LoadBalancer
   ```

2. **Ingress test:**
   ```yaml
   apiVersion: networking.k8s.io/v1
   kind: Ingress
   metadata:
     name: test-ingress
   spec:
     rules:
     - host: test.k3s.local
       http:
         paths:
         - path: /
           pathType: Prefix
           backend:
             service:
               name: nginx
               port:
                 number: 80
   ```

3. **Storage test:**
   ```bash
   kubectl apply -f manifests/examples/pvc-test.yaml
   kubectl apply -f manifests/examples/pod-with-pvc.yaml
   ```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- Deployment —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞—ë—Ç—Å—è
- LoadBalancer service –ø–æ–ª—É—á–∞–µ—Ç external IP
- Ingress —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Traefik
- PVC —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ bind –∫ PV
- Pod –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –≤ persistent volume

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** ~20 –º–∏–Ω—É—Ç

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç—Ç–∞–ø–∞ 3:**
- [ ] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Ingress –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] LoadBalancer —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Storage —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- [ ] Troubleshooting guide —Å–æ–∑–¥–∞–Ω

---

## Tracking –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

### –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å —ç—Ç–∞–ø–æ–≤:
```
‚úÖ –≠—Ç–∞–ø -1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è            [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà] 100%
‚è≥ –≠—Ç–∞–ø  0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞               [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]   0%
‚è≥ –≠—Ç–∞–ø  1: Cluster Bootstrap        [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]   0%
‚è≥ –≠—Ç–∞–ø  2: Storage Setup            [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]   0%
‚è≥ –≠—Ç–∞–ø  3: Validation               [‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]   0%
```

### Estimated Timeline:
| –≠—Ç–∞–ø | –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
|------|---------------|--------------|
| 0 | 30 –º–∏–Ω | –ù–µ—Ç |
| 1.1 | 15 –º–∏–Ω | –≠—Ç–∞–ø 0 |
| 1.2 | 20 –º–∏–Ω | –≠—Ç–∞–ø 1.1 |
| 2 | 25 –º–∏–Ω | –≠—Ç–∞–ø 1 |
| 3 | 20 –º–∏–Ω | –≠—Ç–∞–ø—ã 1-2 |
| **–ò—Ç–æ–≥–æ** | **~1.5 —á–∞—Å–∞** | - |

**vs –ø–æ–ª–Ω—ã–π Kubernetes:** ~4+ —á–∞—Å–∞ (kubeadm + kube-vip + HA + CNI + MetalLB + NGINX)

---

## –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏

### –†–∏—Å–∫ 1: k3s –≤–µ—Ä—Å–∏—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–∞ —Å vSphere CSI
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é stable –≤–µ—Ä—Å–∏—é k3s

### –†–∏—Å–∫ 2: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Flannel –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å NSX
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** Flannel —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ overlay, NSX –Ω–∞ underlay ‚Äî —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏

### –†–∏—Å–∫ 3: VM Template –æ—Ç k8s –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ –æ—à–∏–±–∫–µ
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –í—ã—Å–æ–∫–æ–µ (–∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã)
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ß—ë—Ç–∫–æ —É–∫–∞–∑–∞—Ç—å –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: –Ω—É–∂–µ–Ω **–Ω–æ–≤—ã–π** minimal template
- –ù–∞–∑–≤–∞—Ç—å template —è–≤–Ω–æ: `k3s-ubuntu2404-minimal-template`

### –†–∏—Å–∫ 4: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ VM
**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è
**–í–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ:** –í—ã—Å–æ–∫–æ–µ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- Server node: –º–∏–Ω–∏–º—É–º 2 vCPU, 4 GB RAM
- Agent node: –º–∏–Ω–∏–º—É–º 2 vCPU, 2 GB RAM
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –ø–µ—Ä–µ–¥ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å k8s –ø—Ä–æ–µ–∫—Ç–æ–º

| –ê—Å–ø–µ–∫—Ç | k8s (kubeadm) | k3s |
|--------|---------------|-----|
| **–£—Å—Ç–∞–Ω–æ–≤–∫–∞** | –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å | –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ |
| **–í—Ä–µ–º—è** | 4+ —á–∞—Å–æ–≤ | 1.5 —á–∞—Å–∞ |
| **VM Template** | –° –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ K8s –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ | Minimal Ubuntu |
| **HA Method** | kube-vip (external VIP) | Embedded –∏–ª–∏ external DB |
| **CNI** | Cilium (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ) | Flannel (–≤—Å—Ç—Ä–æ–µ–Ω) |
| **Ingress** | NGINX (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ) | Traefik (–≤—Å—Ç—Ä–æ–µ–Ω) |
| **LoadBalancer** | MetalLB (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ) | ServiceLB (–≤—Å—Ç—Ä–æ–µ–Ω) |
| **Storage** | Local-path (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ) | Local-path (–≤—Å—Ç—Ä–æ–µ–Ω) |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | –í—ã—Å–æ–∫–∞—è | –ù–∏–∑–∫–∞—è |
| **–ù–æ–¥—ã (dev)** | 5 (3 CP + 2 Workers) | 3 (1 Server + 2 Agents) |

**–í—ã–≤–æ–¥:** k3s –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—â–µ –∏ –±—ã—Å—Ç—Ä–µ–µ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å Kubernetes!

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–°–ï–ô–ß–ê–°)

### –î–ª—è Team Lead:
**‚Üê –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:** –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–∞ –ø–æ –≠—Ç–∞–ø—É 0 (VM Template Prep) ‚¨ÖÔ∏è

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å `research/vm-template-prep/AI-AGENT-TASK.md`
2. –í–∫–ª—é—á–∏—Ç—å:
   - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ minimal Ubuntu VM
   - Cloud-init –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è k3s
   - –°–∫—Ä–∏–ø—Ç—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
   - –û—Ç–ª–∏—á–∏—è –æ—Ç k8s template

### –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞:
**–û–∂–∏–¥–∞–π—Ç–µ:** Team Lead —Å–æ–∑–¥–∞—Å—Ç –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–∞

**–ó–∞—Ç–µ–º:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —á–∞—Ç —Å AI-–∞–≥–µ–Ω—Ç–æ–º
2. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏–∑ –∑–∞–¥–∞–Ω–∏—è

---

## –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
```
k3s/
‚îú‚îÄ‚îÄ README.md                     ‚úÖ
‚îú‚îÄ‚îÄ TEAM-LEAD-GUIDE.md           ‚úÖ
‚îú‚îÄ‚îÄ AI-AGENT-WORKFLOW.md         ‚úÖ
‚îú‚îÄ‚îÄ PROJECT-PLAN.md              ‚úÖ (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ K3S-ARCHITECTURE.md          ‚úÖ
‚îî‚îÄ‚îÄ MIGRATION-FROM-K8S.md        ‚è≥
```

### –ü–æ —ç—Ç–∞–ø–∞–º:
```
docs/
‚îú‚îÄ‚îÄ 01-vm-template-prep.md       ‚è≥
‚îú‚îÄ‚îÄ 02-server-node-setup.md      ‚è≥
‚îú‚îÄ‚îÄ 03-agent-nodes-setup.md      ‚è≥
‚îú‚îÄ‚îÄ 04-storage-setup.md          ‚è≥
‚îî‚îÄ‚îÄ 05-validation.md             ‚è≥
```

### Research (—Å–æ–∑–¥–∞—ë—Ç—Å—è AI-–∞–≥–µ–Ω—Ç–∞–º–∏):
```
research/
‚îú‚îÄ‚îÄ vm-template-prep/
‚îÇ   ‚îî‚îÄ‚îÄ AI-AGENT-TASK.md         ‚è≥
‚îú‚îÄ‚îÄ server-node-setup/
‚îÇ   ‚îî‚îÄ‚îÄ AI-AGENT-TASK.md         ‚è≥
‚îú‚îÄ‚îÄ agent-nodes-setup/
‚îÇ   ‚îî‚îÄ‚îÄ AI-AGENT-TASK.md         ‚è≥
‚îú‚îÄ‚îÄ vsphere-csi-setup/
‚îÇ   ‚îî‚îÄ‚îÄ AI-AGENT-TASK.md         ‚è≥
‚îî‚îÄ‚îÄ validation/
    ‚îî‚îÄ‚îÄ AI-AGENT-TASK.md         ‚è≥
```

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ –ø—Ä–æ–µ–∫—Ç–∞

**Dev-–∫–ª–∞—Å—Ç–µ—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–º, –∫–æ–≥–¥–∞:**

‚úÖ **–ö–ª–∞—Å—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- 1 Server –Ω–æ–¥–∞ + 2 Agent –Ω–æ–¥—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Ready
- k3s services –∑–∞–ø—É—â–µ–Ω—ã (k3s, k3s-agent)
- kubectl –¥–æ—Å—Ç—É–ø–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

‚úÖ **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
- Traefik –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ingress —Ç—Ä–∞—Ñ–∏–∫
- ServiceLB —Ä–∞–∑–¥–∞—ë—Ç LoadBalancer IPs
- CoreDNS —Ä–µ–∑–æ–ª–≤–∏—Ç –∏–º–µ–Ω–∞
- Local Storage provisioner —Å–æ–∑–¥–∞—ë—Ç volumes

‚úÖ **vSphere CSI —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- Persistent volumes —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ vSphere datastore
- PVC —É—Å–ø–µ—à–Ω–æ bind –∫ PV
- Pods –º–æ–≥—É—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å volumes

‚úÖ **–¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ:**
- Deployment —Å 3 —Ä–µ–ø–ª–∏–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Service type LoadBalancer –ø–æ–ª—É—á–∞–µ—Ç IP
- Ingress –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫
- Persistent data —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è complete:**
- –í—Å–µ —ç—Ç–∞–ø—ã –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
- Troubleshooting guide —Å–æ–∑–¥–∞–Ω
- –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤—ã

---

**Team Lead: –ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å! –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–∞ –ø–æ VM Template Prep.**

**–û–ø–µ—Ä–∞—Ç–æ—Ä: –û–∂–∏–¥–∞–π—Ç–µ –∑–∞–¥–∞–Ω–∏–µ –æ—Ç Team Lead.**

üöÄ **Let's build a k3s cluster!**
