# k3s Architecture Overview

> **ĞÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ:** Team Lead, ĞĞ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹, AI-Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹
> **Ğ¦ĞµĞ»ÑŒ:** ĞŸĞ¾Ğ½ÑÑ‚ÑŒ ĞºĞ°Ğº ÑƒÑÑ‚Ñ€Ğ¾ĞµĞ½ k3s Ğ¸ Ñ‡ĞµĞ¼ Ğ¾Ğ½ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ¾Ñ‚ "Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾" Kubernetes

---

## ğŸ¯ Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ k3s?

**k3s** â€” ÑÑ‚Ğ¾ ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¸ÑÑ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¸Ğ² Kubernetes Ğ¾Ñ‚ Rancher Labs (Ñ‚ĞµĞ¿ĞµÑ€ÑŒ SUSE).

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:

- **Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ğ¸Ğº:** Ğ’ÑÑ‘ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ñ„Ğ°Ğ¹Ğ»Ğµ ~50 ĞœĞ‘
- **ĞĞ¸Ğ·ĞºĞ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:** 512 ĞœĞ‘ RAM Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ (vs 2 Ğ“Ğ‘ Ñƒ k8s)
- **ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°:** ĞĞ´Ğ½Ğ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ²Ğ¼ĞµÑÑ‚Ğ¾ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ´ÑƒÑ€Ñ‹
- **Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹:** Ingress, LoadBalancer, Storage Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸
- **100% Kubernetes API:** ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ñ k8s
- **CNCF Certified:** ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ´Ğ¸ÑÑ‚Ñ€Ğ¸Ğ±ÑƒÑ‚Ğ¸Ğ² Kubernetes

**k3s = Kubernetes - "Ğ»Ğ¸ÑˆĞ½Ğ¸Ğµ" ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ + ÑƒĞ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ¾**

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° k3s

### Ğ£Ğ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ°Ñ ÑÑ…ĞµĞ¼Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    k3s Binary                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  API Server + Controller + Scheduler + etcd   â”‚  â”‚  Server Node
â”‚  â”‚  + containerd + kubectl + crictl              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Flannel CNI + CoreDNS + Traefik + ServiceLB  â”‚  â”‚  Built-in
â”‚  â”‚  + Local-Path Storage + Metrics (optional)    â”‚  â”‚  Components
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Join with token
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  k3s Agent Binary                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  kubelet + kube-proxy + containerd             â”‚  â”‚  Agent Node
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Server vs Agent

**Server Node:**
- Control Plane ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ (API, Controller, Scheduler)
- etcd (embedded Ğ¸Ğ»Ğ¸ external)
- **ĞœĞ¾Ğ¶ĞµÑ‚** Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ‚ÑŒ workload pods (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)

**Agent Node:**
- Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ kubelet Ğ¸ kube-proxy
- Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ workload pods
- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğº Server Ñ‡ĞµÑ€ĞµĞ· node-token

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** Server Ğ½Ğ¾Ğ´Ğ° Ğ² k3s Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ Ñ‚Ğ°ĞºĞ¶Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ workloads! (vs k8s Ğ³Ğ´Ğµ Control Plane Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ tainted)

---

## ğŸ“¦ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ k3s

### Control Plane

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞÑ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾Ñ‚ k8s |
|-----------|----------|----------------|
| **API Server** | REST API Ğ´Ğ»Ñ k8s | Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ |
| **Controller Manager** | Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ¿Ğ»Ğ¸Ğº, endpoints, etc. | Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ |
| **Scheduler** | Ğ Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ pods Ğ¿Ğ¾ Ğ½Ğ¾Ğ´Ğ°Ğ¼ | Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ |
| **etcd** | Key-value Ğ‘Ğ” Ğ´Ğ»Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ | Embedded Ğ² k3s Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ğ¸Ğº Ğ¸Ğ»Ğ¸ SQLite |

**ĞÑ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ:** Ğ’ k3s Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ **SQLite** Ğ¸Ğ»Ğ¸ **external DB** (MySQL, PostgreSQL) Ğ²Ğ¼ĞµÑÑ‚Ğ¾ etcd Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ¾Ñ‰ĞµĞ½Ğ¸Ñ.

### Data Plane

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞÑ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾Ñ‚ k8s |
|-----------|----------|----------------|
| **kubelet** | Agent Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ½Ğ¾Ğ´Ğµ | Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ |
| **kube-proxy** | Ğ¡ĞµÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾ĞºÑĞ¸ | Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ |
| **containerd** | Container runtime | Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ² k3s (Ğ½Ğµ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¹ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸) |

### Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | k3s | "ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹" k8s | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ |
|--------|-----|--------------|------------|
| **CNI** | Flannel | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ (Cilium, Calico, etc.) | Flannel Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ "Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸" |
| **Ingress** | Traefik v2 | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ (NGINX, etc.) | Traefik ÑƒĞ´Ğ¾Ğ±ĞµĞ½ Ğ´Ğ»Ñ k3s, Ğ°Ğ²Ñ‚Ğ¾ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ |
| **LoadBalancer** | ServiceLB (Klipper) | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ (MetalLB, etc.) | ServiceLB Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ HostPort |
| **Storage** | Local-Path | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ | Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ½Ğ¾Ğ´Ğµ |
| **DNS** | CoreDNS | CoreDNS | Ğ¢Ğ¾ Ğ¶Ğµ ÑĞ°Ğ¼Ğ¾Ğµ |
| **Metrics** | Metrics Server (optional) | Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ | ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ„Ğ»Ğ°Ğ³Ğ¾Ğ¼ |

**ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾:** Ğ’ÑÑ‘ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ÑÑ€Ğ°Ğ·Ñƒ Ğ¿Ğ¾ÑĞ»Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸!

---

## ğŸ”„ k3s vs "Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹" Kubernetes

### Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸

**"ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹" Kubernetes (kubeadm):**
```bash
1. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ container runtime (containerd)
2. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ kubeadm, kubelet, kubectl
3. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ sysctl, Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸ ÑĞ´Ñ€Ğ°
4. kubeadm init --config kubeadm-config.yaml
5. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ kubeconfig
6. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ CNI (Cilium)
7. Join worker Ğ½Ğ¾Ğ´Ñ‹
8. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ingress Controller (NGINX)
9. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ LoadBalancer (MetalLB)
10. Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Storage Provisioner
```
**Ğ’Ñ€ĞµĞ¼Ñ:** 2-4 Ñ‡Ğ°ÑĞ°, Ğ¼Ğ½Ğ¾Ğ³Ğ¾ ÑˆĞ°Ğ³Ğ¾Ğ²

**k3s:**
```bash
# Server node
curl -sfL https://get.k3s.io | sh -

# Agent node
curl -sfL https://get.k3s.io | K3S_URL=... K3S_TOKEN=... sh -
```
**Ğ’Ñ€ĞµĞ¼Ñ:** 5-10 Ğ¼Ğ¸Ğ½ÑƒÑ‚, 2 ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

### Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Full Kubernetes   â”‚         â”‚        k3s          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ API Server          â”‚         â”‚ k3s binary          â”‚
â”‚ Controller Manager  â”‚    vs   â”‚   (all-in-one)      â”‚
â”‚ Scheduler           â”‚         â”‚                     â”‚
â”‚ etcd (separate)     â”‚         â”‚ + embedded etcd     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ kubelet (separate)  â”‚         â”‚ + kubelet           â”‚
â”‚ kube-proxy (sep.)   â”‚         â”‚ + kube-proxy        â”‚
â”‚ containerd (sep.)   â”‚         â”‚ + containerd        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CNI (install)       â”‚         â”‚ + Flannel (built-in)â”‚
â”‚ Ingress (install)   â”‚         â”‚ + Traefik (built-in)â”‚
â”‚ LB (install)        â”‚         â”‚ + ServiceLB (built) â”‚
â”‚ Storage (install)   â”‚         â”‚ + Local-Path (built)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Multiple binaries                Single binary
Manual configuration             Auto-configuration
```

### Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | k8s (kubeadm) | k3s | Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ |
|-----------|---------------|-----|----------|
| **Control Plane** | 2-4 Ğ“Ğ‘ RAM | 512 ĞœĞ‘ - 1 Ğ“Ğ‘ | ~75% |
| **Worker Node** | 1-2 Ğ“Ğ‘ RAM | 256-512 ĞœĞ‘ | ~75% |
| **Disk** | 20+ Ğ“Ğ‘ | 10-15 Ğ“Ğ‘ | ~50% |
| **Ğ‘Ğ¸Ğ½Ğ°Ñ€Ğ½Ğ¸ĞºĞ¸** | ~500 ĞœĞ‘ | ~50 ĞœĞ‘ | ~90% |

---

## ğŸ”Œ Ğ¡ĞµÑ‚ĞµĞ²Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° k3s

### ĞĞ° Ğ½Ğ°ÑˆĞµĞ¹ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ (VMware + NSX-T)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NSX-T Underlay                       â”‚
â”‚              k8s-zeon-dev-segment                       â”‚
â”‚                 10.246.10.0/24                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚             â”‚             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Server  â”‚   â”‚ Agent 1 â”‚   â”‚ Agent 2 â”‚
    â”‚ .10.50  â”‚   â”‚ .10.51  â”‚   â”‚ .10.52  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚         Flannel Overlay Network      â”‚
    â”‚          10.42.0.0/16 (default)      â”‚
    â”‚                                      â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  â”‚ Pod  â”‚  â”‚ Pod  â”‚  â”‚ Pod  â”‚      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ£Ñ€Ğ¾Ğ²Ğ½Ğ¸ ÑĞµÑ‚Ğ¸:**
1. **NSX-T (underlay):** Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ²ÑĞ·Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ VM (10.246.10.0/24)
2. **Flannel (overlay):** Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞµÑ‚ÑŒ Ğ´Ğ»Ñ pods (10.42.0.0/16)
3. **Services:** Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ IP Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² (10.43.0.0/16 Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)

**Flannel:**
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ VXLAN Ğ´Ğ»Ñ Ğ¸Ğ½ĞºĞ°Ğ¿ÑÑƒĞ»ÑÑ†Ğ¸Ğ¸ pod Ñ‚Ñ€Ğ°Ñ„Ğ¸ĞºĞ°
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ k3s
- ĞĞµ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ÑƒĞµÑ‚ Ñ NSX-T (Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ½Ğ° Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… ÑƒÑ€Ğ¾Ğ²Ğ½ÑÑ…)

---

## ğŸ’¾ Storage Ğ² k3s

### Local-Path Provisioner (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pod PVC    â”‚ â”€â”€> PV (Local-Path) â”€â”€> /var/lib/rancher/k3s/storage/
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         Ğ½Ğ° Ğ½Ğ¾Ğ´Ğµ Ğ³Ğ´Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ pod
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ½Ğ° Ğ½Ğ¾Ğ´Ğµ
- ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹, Ğ½Ğ¾ **Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ** pods Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ½Ğ¾Ğ´Ğ°Ğ¼Ğ¸
- ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ dev/test, Ğ½Ğµ Ğ´Ğ»Ñ production

### vSphere CSI (ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pod PVC    â”‚ â”€â”€> PV (vSphere CSI) â”€â”€> vSphere Datastore
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           (VMDK volumes)
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Persistent volumes Ğ² vSphere datastore
- **ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ** pods (volume detach/attach)
- Production-ready
- Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ vCenter credentials

**Ğ”Ğ»Ñ Ğ½Ğ°ÑˆĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:** Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ **vSphere CSI** Ğ´Ğ»Ñ production workloads.

---

## ğŸŒ Ingress Ğ¸ LoadBalancer Ğ² k3s

### Traefik Ingress (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹)

```
Internet
   â”‚
   â”‚ 80/443
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NSX-T Gateway  â”‚
â”‚  NAT/Firewall  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Traefik â”‚ â”€â”€> Service â”€â”€> Pods
    â”‚ DaemonSetâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   (Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ½Ğ¾Ğ´Ğµ, HostPort)
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ ĞºĞ°Ğº DaemonSet Ğ½Ğ° Ğ²ÑĞµÑ… Ğ½Ğ¾Ğ´Ğ°Ñ…
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ HostPort (80/443 Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ½Ğ¾Ğ´Ğµ)
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ingress Ñ€ĞµÑÑƒÑ€ÑÑ‹
- ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

### ServiceLB / Klipper LB (Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹)

```
Service type=LoadBalancer
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ServiceLB     â”‚ â”€â”€> Pods Ğ½Ğ° Ğ½Ğ¾Ğ´Ğ°Ñ…
â”‚  (Klipper LB)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   Ğ’Ñ‹Ğ´ĞµĞ»ÑĞµÑ‚ NodePort Ğ½Ğ° Ğ²ÑĞµÑ… Ğ½Ğ¾Ğ´Ğ°Ñ…
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ LoadBalancer Ğ´Ğ»Ñ dev/test
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ NodePort Ğ¿Ğ¾Ğ´ ĞºĞ°Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼
- External IP = IP Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ¸Ğ· Ğ½Ğ¾Ğ´
- **ĞĞµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ production** (Ğ½ĞµÑ‚ Ğ½Ğ°ÑÑ‚Ğ¾ÑÑ‰ĞµĞ³Ğ¾ LB)

**Ğ”Ğ»Ñ production:** ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ½Ğ° **MetalLB** (Ğ½Ğ° Ğ½Ğ°ÑˆĞµĞ¹ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ ĞµÑÑ‚ÑŒ IP pool 10.246.10.200-220).

---

## ğŸ”’ Security Ğ² k3s

### ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ k3s:

- âœ… **TLS Ğ²ĞµĞ·Ğ´Ğµ:** Ğ’ÑĞµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ TLS
- âœ… **RBAC enabled:** Role-Based Access Control
- âœ… **Network Policies:** Flannel Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ (Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸)
- âœ… **Pod Security:** Admission controllers Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹
- âš ï¸ **Server Ğ½Ğ¾Ğ´Ğ° Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ workloads:** ĞÑ‚Ğ»Ğ¸Ñ‡Ğ¸Ğµ Ğ¾Ñ‚ k8s (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ taint)

### Best practices:

1. **Taint Server Ğ½Ğ¾Ğ´Ñƒ** (Ğ´Ğ»Ñ production):
   ```bash
   kubectl taint nodes [server-node] node-role.kubernetes.io/master=true:NoSchedule
   ```

2. **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº API:**
   - Firewall Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° (DFW Ğ² NSX)
   - Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ñ Ñ€Ğ°Ğ·Ñ€ĞµÑˆÑ‘Ğ½Ğ½Ñ‹Ñ… IP

3. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ kubeconfig Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ°Ğ²Ğ°Ğ¼Ğ¸:**
   - ĞĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ admin kubeconfig Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹

4. **Network Policies:**
   - ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ñ„Ğ¸Ğº Ğ¼ĞµĞ¶Ğ´Ñƒ namespaces

---

## ğŸ“ˆ High Availability (HA) Ğ² k3s

### Dev-ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ (Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server Node â”‚ â”€â”€> Workloads
â”‚   (single)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚
   â””â”€â”€> Agent Nodes
```

**ĞĞµÑ‚ HA:** Ğ•ÑĞ»Ğ¸ Server Ğ½Ğ¾Ğ´Ğ° ÑƒĞ¿Ğ°Ğ´Ñ‘Ñ‚ â€” ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½.

### Production HA:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server 1    â”‚  â”‚ Server 2    â”‚  â”‚ Server 3    â”‚
â”‚ + etcd      â”‚  â”‚ + etcd      â”‚  â”‚ + etcd      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚    External LB or DNS      â”‚
          â”‚   (Ğ´Ğ»Ñ API endpoint)       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                 Agent Nodes
```

**HA Ñ embedded etcd:**
- ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 3 server Ğ½Ğ¾Ğ´Ñ‹ (Ğ´Ğ»Ñ etcd quorum)
- Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¹ etcd Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ¸Ğ·ÑƒĞµÑ‚ÑÑ
- ĞÑƒĞ¶ĞµĞ½ external load balancer Ğ´Ğ»Ñ API endpoint

**ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ°:** External Database (MySQL/PostgreSQL) Ğ²Ğ¼ĞµÑÑ‚Ğ¾ embedded etcd.

**Ğ”Ğ»Ñ Ğ½Ğ°ÑˆĞµĞ³Ğ¾ Dev-ĞºĞ»Ğ°ÑÑ‚ĞµÑ€Ğ°:** ĞŸĞ¾ĞºĞ° Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ 1 server Ğ½Ğ¾Ğ´Ñ‹. HA Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ¼ Ğ´Ğ»Ñ production.

---

## ğŸ”§ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ k3s

### Ğ¤Ğ°Ğ¹Ğ»Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

```
/etc/rancher/k3s/
â”œâ”€â”€ k3s.yaml                 # kubeconfig (Server)
â”œâ”€â”€ config.yaml              # k3s configuration
â””â”€â”€ registries.yaml          # container registries config

/var/lib/rancher/k3s/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ manifests/          # Auto-deploy manifests (HelmChart CRDs)
â”‚   â”œâ”€â”€ node-token          # Token Ğ´Ğ»Ñ join Agent Ğ½Ğ¾Ğ´
â”‚   â”œâ”€â”€ tls/                # Certificates
â”‚   â””â”€â”€ db/                 # etcd data (ĞµÑĞ»Ğ¸ embedded)
â””â”€â”€ agent/
    â””â”€â”€ etc/                # Agent config

/usr/local/bin/
â””â”€â”€ k3s                     # ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ğ¸Ğº (symlinks: kubectl, crictl, ctr)
```

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸

**Server:**
```bash
curl -sfL https://get.k3s.io | sh -s - server \
  --write-kubeconfig-mode 644 \           # kubeconfig permissions
  --node-ip 10.246.10.50 \                # IP Ğ½Ğ¾Ğ´Ñ‹
  --flannel-iface ens192 \                # Network interface
  --disable traefik \                     # ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
  --disable servicelb \                   # ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
  --tls-san k3s-api.zeon.local            # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¸Ğ¼Ñ Ğ´Ğ»Ñ API cert
```

**Agent:**
```bash
curl -sfL https://get.k3s.io | K3S_URL=https://10.246.10.50:6443 \
  K3S_TOKEN=... sh -s - agent \
  --node-ip 10.246.10.51
```

---

## ğŸ“ ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ k3s vs "Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹" k8s

### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ k3s ĞµÑĞ»Ğ¸:
- âœ… ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑˆÑŒ Ñ Kubernetes (learning)
- âœ… Dev/test Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
- âœ… Edge computing / IoT
- âœ… ĞœĞ°Ğ»Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹ (< 8 Ğ“Ğ‘ RAM)
- âœ… ĞÑƒĞ¶Ğ½Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ğ° Ğ¸ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸
- âœ… Single-tenant ĞºĞ»Ğ°ÑÑ‚ĞµÑ€

### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ "Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹" k8s ĞµÑĞ»Ğ¸:
- âš ï¸ Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ production ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ (100+ Ğ½Ğ¾Ğ´)
- âš ï¸ Multi-tenant Ñ Ğ¶Ñ‘ÑÑ‚ĞºĞ¾Ğ¹ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸ĞµĞ¹
- âš ï¸ ĞÑƒĞ¶Ğ½Ñ‹ ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğµ CNI/CSI/Ingress
- âš ï¸ Compliance Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²)
- âš ï¸ Ğ£Ğ¶Ğµ ĞµÑÑ‚ÑŒ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ğ¸Ğ·Ğ° Ğ² k8s

**Ğ”Ğ»Ñ Ğ½Ğ°ÑˆĞµĞ³Ğ¾ ÑĞ»ÑƒÑ‡Ğ°Ñ:** k3s Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°! ĞŸÑ€Ğ¾Ñ‰Ğµ, Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ, Ğ¼ĞµĞ½ÑŒÑˆĞµ Ğ´Ğ²Ğ¸Ğ¶ÑƒÑ‰Ğ¸Ñ…ÑÑ Ñ‡Ğ°ÑÑ‚ĞµĞ¹.

---

## ğŸ“š Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹

**ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:**
- [k3s.io](https://k3s.io/)
- [docs.k3s.io](https://docs.k3s.io/)
- [GitHub: k3s](https://github.com/k3s-io/k3s)

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ñ:**
- [k3s vs k8s](https://www.suse.com/c/rancher_blog/k3s-vs-k8s/)
- [Lightweight Kubernetes](https://thenewstack.io/k3s-lightweight-kubernetes/)

**vSphere Integration:**
- [vSphere CSI with k3s](https://ranchermanager.docs.rancher.com/how-to-guides/new-user-guides/kubernetes-clusters-in-rancher-setup/set-up-cloud-providers/vsphere)

---

## ğŸ“Š Summary

**k3s = ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹, Ğ½Ğ¾ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Kubernetes**

| ĞÑĞ¿ĞµĞºÑ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|
| **ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ğ°** | ĞĞ´Ğ½Ğ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° vs Ğ¼Ğ½Ğ¾Ğ³Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° |
| **Ğ Ğ°Ğ·Ğ¼ĞµÑ€** | 50 ĞœĞ‘ binary vs 500+ ĞœĞ‘ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² |
| **Ğ ĞµÑÑƒÑ€ÑÑ‹** | 512 ĞœĞ‘ RAM vs 2 Ğ“Ğ‘+ RAM |
| **Ğ’Ñ€ĞµĞ¼Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸** | 5-10 Ğ¼Ğ¸Ğ½ÑƒÑ‚ vs 2-4 Ñ‡Ğ°ÑĞ° |
| **Ğ’ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹** | Traefik, ServiceLB, Storage Ğ¸Ğ· ĞºĞ¾Ñ€Ğ¾Ğ±ĞºĞ¸ |
| **Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ** | 100% Kubernetes API, CNCF certified |
| **Production** | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² production (Rancher, IoT, Edge) |

**Ğ”Ğ»Ñ Ğ½Ğ°ÑˆĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:** k3s â€” Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ ÑÑ‚Ğ°Ñ€Ñ‚Ğ° Ñ Kubernetes Ğ½Ğ° vSphere!

---

**Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚:** [MIGRATION-FROM-K8S.md](./MIGRATION-FROM-K8S.md)
