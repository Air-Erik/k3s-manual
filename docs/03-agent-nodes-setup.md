# k3s Agent Nodes Setup

> **–°—Ç–∞—Ç—É—Å:** ‚è≥ TODO
> **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** AI-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å + –û–ø–µ—Ä–∞—Ç–æ—Ä
> **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** ‚úÖ Server node —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞

---

## üéØ –¶–µ–ª—å

–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å Agent –Ω–æ–¥—ã –∫ k3s –∫–ª–∞—Å—Ç–µ—Ä—É. Agent –Ω–æ–¥—ã ‚Äî —ç—Ç–æ worker –Ω–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç workload pods.

---

## üìã –ü—Ä–æ—Ü–µ—Å—Å

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ VM –¥–ª—è Agent –Ω–æ–¥

**Agent 1:**
- **–ò–∑ Template:** `k3s-ubuntu2404-minimal-template`
- **IP:** `10.246.10.51`
- **Hostname:** `k3s-agent-01`
- **RAM:** 2 –ì–ë
- **vCPU:** 2

**Agent 2:**
- **–ò–∑ Template:** `k3s-ubuntu2404-minimal-template`
- **IP:** `10.246.10.52`
- **Hostname:** `k3s-agent-02`
- **RAM:** 2 –ì–ë
- **vCPU:** 2

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ k3s –≤ —Ä–µ–∂–∏–º–µ Agent

**–ù–∞ –∫–∞–∂–¥–æ–π Agent –Ω–æ–¥–µ:**
```bash
curl -sfL https://get.k3s.io | K3S_URL=https://10.246.10.50:6443 \
  K3S_TOKEN=[node-token] sh -s - agent \
  --node-ip [agent-ip]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `K3S_URL` ‚Äî URL Server –Ω–æ–¥—ã
- `K3S_TOKEN` ‚Äî node-token —Å Server –Ω–æ–¥—ã
- `--node-ip` ‚Äî IP –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π Agent –Ω–æ–¥—ã

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** ~2-3 –º–∏–Ω—É—Ç—ã –Ω–∞ –Ω–æ–¥—É

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è

**–° Server –Ω–æ–¥—ã:**
```bash
sudo k3s kubectl get nodes

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# k3s-server-01   Ready    control-plane,master   10m   v1.30.x
# k3s-agent-01    Ready    <none>                 5m    v1.30.x
# k3s-agent-02    Ready    <none>                 5m    v1.30.x
```

**–ù–∞ Agent –Ω–æ–¥–µ:**
```bash
sudo systemctl status k3s-agent

# –õ–æ–≥–∏
journalctl -u k3s-agent -f
```

---

## üëâ –î–µ—Ç–∞–ª—å–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è AI-–∞–≥–µ–Ω—Ç–∞

**AI-–∞–≥–µ–Ω—Ç —Å–æ–∑–¥–∞—Å—Ç:** `research/agent-nodes-setup/AI-AGENT-TASK.md`

**–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –æ—Ç AI-–∞–≥–µ–Ω—Ç–∞:**
1. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è VM –¥–ª—è Agent
2. –°–∫—Ä–∏–ø—Ç `scripts/install-k3s-agent.sh`
3. –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∫–ª–∞—Å—Ç–µ—Ä—É
4. –í–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
5. Troubleshooting guide

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [ ] 2 VM –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Agent (10.246.10.51-52)
- [ ] k3s-agent —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –æ–±–µ–∏—Ö –Ω–æ–¥–∞—Ö
- [ ] k3s-agent service –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] kubectl get nodes –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 Ready –Ω–æ–¥—ã
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π deployment
- [ ] Pods —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –≤—Å–µ–º –Ω–æ–¥–∞–º

---

## üß™ –¢–µ—Å—Ç

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π deployment:**
```bash
kubectl create deployment nginx --image=nginx --replicas=3
kubectl get pods -o wide

# Pods –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –Ω–æ–¥–∞—Ö (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–µ—Å—É—Ä—Å—ã)
```

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** [04-storage-setup.md](./04-storage-setup.md)
